Looking in links: /cvmfs/soft.computecanada.ca/custom/python/wheelhouse/gentoo2023/x86-64-v3, /cvmfs/soft.computecanada.ca/custom/python/wheelhouse/gentoo2023/generic, /cvmfs/soft.computecanada.ca/custom/python/wheelhouse/generic
Obtaining file:///lustre06/project/6086105/ymbahram/improved-diffusion
  Preparing metadata (setup.py): started
  Preparing metadata (setup.py): finished with status 'done'
WARNING: Retrying (Retry(total=4, connect=None, read=None, redirect=None, status=None)) after connection broken by 'NewConnectionError('<pip._vendor.urllib3.connection.HTTPSConnection object at 0x1541b7546e50>: Failed to establish a new connection: [Errno 101] Network is unreachable')': /simple/blobfile/
WARNING: Retrying (Retry(total=3, connect=None, read=None, redirect=None, status=None)) after connection broken by 'NewConnectionError('<pip._vendor.urllib3.connection.HTTPSConnection object at 0x1541b7547550>: Failed to establish a new connection: [Errno 101] Network is unreachable')': /simple/blobfile/
WARNING: Retrying (Retry(total=2, connect=None, read=None, redirect=None, status=None)) after connection broken by 'NewConnectionError('<pip._vendor.urllib3.connection.HTTPSConnection object at 0x1541b7547d10>: Failed to establish a new connection: [Errno 101] Network is unreachable')': /simple/blobfile/
WARNING: Retrying (Retry(total=1, connect=None, read=None, redirect=None, status=None)) after connection broken by 'NewConnectionError('<pip._vendor.urllib3.connection.HTTPSConnection object at 0x1541b75085d0>: Failed to establish a new connection: [Errno 101] Network is unreachable')': /simple/blobfile/
WARNING: Retrying (Retry(total=0, connect=None, read=None, redirect=None, status=None)) after connection broken by 'NewConnectionError('<pip._vendor.urllib3.connection.HTTPSConnection object at 0x1541b7508e50>: Failed to establish a new connection: [Errno 101] Network is unreachable')': /simple/blobfile/
Processing /cvmfs/soft.computecanada.ca/custom/python/wheelhouse/generic/blobfile-2.1.1+computecanada-py3-none-any.whl (from improved-diffusion==0.0.0)
Requirement already satisfied: torch in /lustre06/project/6086105/ymbahram/gputorch/lib/python3.11/site-packages (from improved-diffusion==0.0.0) (2.5.1+computecanada)
Requirement already satisfied: tqdm in /lustre06/project/6086105/ymbahram/gputorch/lib/python3.11/site-packages (from improved-diffusion==0.0.0) (4.67.0+computecanada)
WARNING: Retrying (Retry(total=4, connect=None, read=None, redirect=None, status=None)) after connection broken by 'NewConnectionError('<pip._vendor.urllib3.connection.HTTPSConnection object at 0x1541b6a17610>: Failed to establish a new connection: [Errno 101] Network is unreachable')': /simple/pycryptodomex/
WARNING: Retrying (Retry(total=3, connect=None, read=None, redirect=None, status=None)) after connection broken by 'NewConnectionError('<pip._vendor.urllib3.connection.HTTPSConnection object at 0x1541b6a16990>: Failed to establish a new connection: [Errno 101] Network is unreachable')': /simple/pycryptodomex/
WARNING: Retrying (Retry(total=2, connect=None, read=None, redirect=None, status=None)) after connection broken by 'NewConnectionError('<pip._vendor.urllib3.connection.HTTPSConnection object at 0x1541b6a141d0>: Failed to establish a new connection: [Errno 101] Network is unreachable')': /simple/pycryptodomex/
WARNING: Retrying (Retry(total=1, connect=None, read=None, redirect=None, status=None)) after connection broken by 'NewConnectionError('<pip._vendor.urllib3.connection.HTTPSConnection object at 0x1541b6a14790>: Failed to establish a new connection: [Errno 101] Network is unreachable')': /simple/pycryptodomex/
WARNING: Retrying (Retry(total=0, connect=None, read=None, redirect=None, status=None)) after connection broken by 'NewConnectionError('<pip._vendor.urllib3.connection.HTTPSConnection object at 0x1541b6a0d490>: Failed to establish a new connection: [Errno 101] Network is unreachable')': /simple/pycryptodomex/
Processing /cvmfs/soft.computecanada.ca/custom/python/wheelhouse/generic/pycryptodomex-3.19.0+computecanada-cp35-abi3-linux_x86_64.whl (from blobfile>=1.0.5->improved-diffusion==0.0.0)
Requirement already satisfied: urllib3<3,>=1.25.3 in /lustre06/project/6086105/ymbahram/gputorch/lib/python3.11/site-packages (from blobfile>=1.0.5->improved-diffusion==0.0.0) (2.2.3+computecanada)
WARNING: Retrying (Retry(total=4, connect=None, read=None, redirect=None, status=None)) after connection broken by 'NewConnectionError('<pip._vendor.urllib3.connection.HTTPSConnection object at 0x1541b6016a10>: Failed to establish a new connection: [Errno 101] Network is unreachable')': /simple/lxml/
WARNING: Retrying (Retry(total=3, connect=None, read=None, redirect=None, status=None)) after connection broken by 'NewConnectionError('<pip._vendor.urllib3.connection.HTTPSConnection object at 0x1541b6012750>: Failed to establish a new connection: [Errno 101] Network is unreachable')': /simple/lxml/
WARNING: Retrying (Retry(total=2, connect=None, read=None, redirect=None, status=None)) after connection broken by 'NewConnectionError('<pip._vendor.urllib3.connection.HTTPSConnection object at 0x1541b6011410>: Failed to establish a new connection: [Errno 101] Network is unreachable')': /simple/lxml/
WARNING: Retrying (Retry(total=1, connect=None, read=None, redirect=None, status=None)) after connection broken by 'NewConnectionError('<pip._vendor.urllib3.connection.HTTPSConnection object at 0x1541b60143d0>: Failed to establish a new connection: [Errno 101] Network is unreachable')': /simple/lxml/
WARNING: Retrying (Retry(total=0, connect=None, read=None, redirect=None, status=None)) after connection broken by 'NewConnectionError('<pip._vendor.urllib3.connection.HTTPSConnection object at 0x1541b6017710>: Failed to establish a new connection: [Errno 101] Network is unreachable')': /simple/lxml/
Processing /cvmfs/soft.computecanada.ca/custom/python/wheelhouse/generic/lxml-4.9.2+computecanada-cp311-cp311-linux_x86_64.whl (from blobfile>=1.0.5->improved-diffusion==0.0.0)
Requirement already satisfied: filelock~=3.0 in /lustre06/project/6086105/ymbahram/gputorch/lib/python3.11/site-packages (from blobfile>=1.0.5->improved-diffusion==0.0.0) (3.16.1+computecanada)
Requirement already satisfied: typing-extensions>=4.8.0 in /lustre06/project/6086105/ymbahram/gputorch/lib/python3.11/site-packages (from torch->improved-diffusion==0.0.0) (4.12.2+computecanada)
Requirement already satisfied: networkx in /lustre06/project/6086105/ymbahram/gputorch/lib/python3.11/site-packages (from torch->improved-diffusion==0.0.0) (3.4.2+computecanada)
Requirement already satisfied: jinja2 in /lustre06/project/6086105/ymbahram/gputorch/lib/python3.11/site-packages (from torch->improved-diffusion==0.0.0) (3.1.4+computecanada)
Requirement already satisfied: fsspec in /lustre06/project/6086105/ymbahram/gputorch/lib/python3.11/site-packages (from torch->improved-diffusion==0.0.0) (2024.10.0+computecanada)
Requirement already satisfied: sympy==1.13.1 in /lustre06/project/6086105/ymbahram/gputorch/lib/python3.11/site-packages (from torch->improved-diffusion==0.0.0) (1.13.1+computecanada)
Requirement already satisfied: mpmath<1.4,>=1.1.0 in /lustre06/project/6086105/ymbahram/gputorch/lib/python3.11/site-packages (from sympy==1.13.1->torch->improved-diffusion==0.0.0) (1.3.0+computecanada)
Requirement already satisfied: MarkupSafe>=2.0 in /lustre06/project/6086105/ymbahram/gputorch/lib/python3.11/site-packages (from jinja2->torch->improved-diffusion==0.0.0) (2.1.5+computecanada)
Installing collected packages: pycryptodomex, lxml, blobfile, improved-diffusion
  Running setup.py develop for improved-diffusion
Successfully installed blobfile-2.1.1+computecanada improved-diffusion-0.0.0 lxml-4.9.2+computecanada pycryptodomex-3.19.0+computecanada
Traceback (most recent call last):
  File "/home/ymbahram/projects/def-hadi87/ymbahram/improved-diffusion/scripts/finetune_data10_gammas.py", line 9, in <module>
    from improved_diffusion.image_datasets import load_data
  File "/lustre06/project/6086105/ymbahram/improved-diffusion/improved_diffusion/image_datasets.py", line 72, in <module>
    class ImageDataset(Dataset):
  File "/lustre06/project/6086105/ymbahram/improved-diffusion/improved_diffusion/image_datasets.py", line 73, in ImageDataset
    def __init__(self, resolution, image_paths, classes=None, shard=0, num_shards=1, random_crop=random_crop, random_flip=random_flip,):
                                                                                                 ^^^^^^^^^^^
NameError: name 'random_crop' is not defined
